function uimap(v)% Function UImap(v) - GUI version of COASTMAP coastline map%%   Plot a filled-polygon map of the tropical Pacific coastline data in MAP(lon,lat). %   Uses an input axis vector V = [Lon1 Lon2 Lat1 Lat2] to plot a Lat-Lon grid with %   grid lines at 10-deg intervals (dotted) with the dateline and equator solid.  %   Longitudes must be expressed as degrees east of Greenwich.  The coastline %   is plotted from MAP, a 2-column matrix ([lon,lat]), which is loaded into memory. %   Coastlines not to be filled (small islands, etc.) are not drawn by default but%   may be optionally plotted using the [Show Islands] pushbutton. The fill color for%   continents is medium gray by default but may be changed to other colors via the%   land color pop-up menu. The coastline file MAP must be loadable from the MATLABPATH. %   Pressing the [Quit] pushbutton will clear global variables before closing the plot.%   %   Limitation: Coastline data are presently unavailable outside the tropical Pacific%   domain = 120E-60W, 40S-40N. Any subset (V) of that domain will zoom in on other%   tropical Pacific areas.if nargin==0;v=[120,300,-40,40];endload map;cla;figure(1);global map k1 k2 nn hc popcol pstnv(1)=max(v(1),120);v(2)=min(v(2),300);v(3)=max(v(3),-40);v(4)=min(v(4),40);% Plot interior 10x10 degree grid linesxrng=(v(2)-v(1))/10-1;yrng=(v(4)-v(3))/10-1;latx=zeros(2,yrng);laty=latx;latx(1,:)=v(1)*ones(1,yrng);latx(2,:)=v(2)*ones(1,yrng);laty(1,:)=(v(3)+10):10:(v(4)-10);laty(2,:)=laty(1,:);lonx=zeros(2,xrng);lony=lonx;lony(1,:)=v(3)*ones(1,xrng);lony(2,:)=v(4)*ones(1,xrng);lonx(1,:)=(v(1)+10):10:(v(2)-10);lonx(2,:)=lonx(1,:);plot(latx,laty,':w',lonx,lony,':w',[v(1) v(2)],[0 0],'-w',[180 180],[v(3) v(4)],'-w'); hold on% Plot filled polygon areas of mapkk=findis(map(:,1));k1=[1 (kk+1)'];k2=[(kk-1)' length(map(:,1))];nn=length(k1);hc=zeros(nn-1,1);for k=1:nn-1	hc(k)=fill(map(k1(k):k2(k),1),map(k1(k):k2(k),2),[.5 .5 .5]);   % Fill polygons	plot(map(k1(k):k2(k),1),map(k1(k):k2(k),2),'w')   % Do coastlinesendhold off% Set plot domain and square the aspect ratioaxis(v)set(gca,'layer','top')              % Place plot frame above the mapset(gca,'aspectratio',[(v(2)-v(1))/(v(4)-v(3)),1])% Set the X-axis labels (longitudes)lint=10*ceil((v(2)-v(1))/100);lons=lint*ceil(v(1)/lint):lint:lint*floor(v(2)/lint);nl=length(lons);for k=1:nl	if lons(k)<180		str=str2mat(str,[int2str(lons(k)),'E']);	elseif lons(k)==180		str=str2mat(str,[int2str(lons(k))]);	else		str=str2mat(str,[int2str(360-lons(k)),'W']);	endendset(gca,'xtick',lons(1)-lint:lint:lons(nl))set(gca,'xticklabels',str);str=[];% Set the Y-axis labels (latitudes)lint=10*ceil((v(4)-v(3))/100);lats=lint*ceil(v(3)/lint):lint:lint*floor(v(4)/lint);nl=length(lats);for k=1:nl	if lats(k)<0		str=str2mat(str,[int2str(abs(lats(k))),'S']);	elseif lats(k)==0		str=str2mat(str,[int2str(lats(k))]);	else		str=str2mat(str,[int2str(lats(k)),'N']);	endendset(gca,'ytick',lats(1)-lint:lint:lats(nl))set(gca,'yticklabels',str)% Set other plot properties (Default font is Helvetica)set(gcf,'Color',[.2 .2 .3])set(gcf,'Position',[50,100,650,360],'Units','pixels')font='Palatino';set(gca,'fontname',font)hx=label('Longitude','x');xpos=get(hx,'position');set(hx,'fontname',font,'units','normalize','position',[xpos(1) xpos(2)-.03])hy=label('Latitude','y');ypos=get(hy,'position');set(hy,'fontname',font,'units','normalize','position',[ypos(1)-.01 ypos(2)])set(gcf,'PaperOrientation','portrait')% Define GUI control position arrayset(gca,'Units','inches')hp=get(gca,'Position');hp(1)=2*hp(1);hp(3)=.9*hp(3);set(gca,'Position',hp);facx=hp(3)/(v(2)-v(1));facy=hp(4)/(v(4)-v(3)+20);pstn1=[.15,hp(2)+.55*hp(4),1.35,.25];pstn2=[.15,hp(2)+.45*hp(4),1.35,.25];pstn3=[.15,hp(2)+.35*hp(4),1.35,.25];pstn=[pstn1' pstn2' pstn3']';set(gca,'Units','normalized');% Plot small non-polygon areas (small islands, etc.)plotisl='global map k1 k2 nn;hold on;plot(map(k1(nn):k2(nn),1),map(k1(nn):k2(nn),2),''.w'')';pbisl=uicontrol(gcf,...	'Style','push',...	'Units','inches',...	'Position',pstn(1,:),...	'String','Show Islands',...	'CallBack',plotisl);% Specify the fill color for land areaslandcolor=['global hc popcol;',...	'cb_col = [.5 .5 .5;0 .7 1;0 .1 1;1 .6 0;.5 .3 .2];',...	'set(hc(:),''FaceColor'',cb_col(get(popcol,''Value''),:))'];popcol=uicontrol(gcf,...	'Style','popup',...	'Units','inches',...	'String','M.Grey Land|L.Blue Land|D.Blue Land|Ochre Land|Copper Land',...	'Position',pstn(2,:),...	'CallBack',landcolor);	% Clear workspace variables and quit plotquitpl='clear global;clear cb_col;close;';qplot=uicontrol(gcf,...	'Style','push',...	'Units','inches',...	'Position',pstn(3,:),...	'String','Quit',...	'CallBack',quitpl);